Ã‹
    Â®GÃ¶hÃ˜  Ã£            
       Ã³D  â€” d dl mZmZmZmZmZ d dlm Z  d dlm	Z	 d dl
m
Z
 d dlm
Z
  eÂ«       Zdâ€ Zej!                  d ej"                  Â¬Â«       eeÂ«      fd	e d
e	fd
â€Â«       Zej'                  d Â«       edÂ«       edÂ«       edÂ«       eeÂ«      fd
e
e   de
e   de
e   d
e	fdâ€Â«       Zej'                  dÂ«       eeÂ«      fded
e	fdâ€Â«       Zej1                  dÂ«       eeÂ«      fdede d
e	fdâ€Â«       Zej5                  dej6                  Â¬Â«       eeÂ«      fded
e	fdâ€Â«       Zy)Ã©    )Ãš FastAPIÃš
HTTPExceptionÃšstatusÃš DependsÃšQuery)ÃšEmpresaDadosGerais)Ãš Session)ÃšUser)ÃšOptionalc               #   Ã³t   K  â€” t        Â«       } 	 | â€“â€” | j                  Â«        y # | j                  Â«        w xY wÂ­w)N)r	   Ãšclose)Ãšdbs    ÃºC:\ecompjr\main.pyÃšget_dbr   
   s)   Ã¨ Ã¸â‚¬ Ãœ	â€¹â‚¬BÃ°Ã˜Å Ã 
Ââ€°Â
Ã¸Ë†Ââ€°Â
Ã¼s   â€š
8Å½# â€™8Â£5Âµ8z/users)Ãš
status_codeÃšuserr   c           	      Ã³Âº  â€” |j                  t        Â«      j                  t        j                  | j                  k(  Â«      j	                  Â«       rt
        t        j                  dÂ¬Â«      â€š|j                  t        Â«      j                  t        j                  | j                  k(  Â«      j	                  Â«       rt
        t        j                  dÂ¬Â«      â€št        | j                  | j                  | j                  | j                  | j                  | j                  | j                  Â¬Â«       }|j                  |Â«       |j                  Â«        |j!                  |Â«       |S )zN
    Cadastra uma nova empresa, verificando duplicidade de CNPJ e e-mail.
    u0   JÃƒÂ¡ existe uma empresa cadastrada com esse CNPJ.Â©r   Ãšdetailu2   JÃƒÂ¡ existe uma empresa cadastrada com esse e-mail.) ÃšnameÃšcnpjÃšcidadeÃšramo_atuacaoÃštelefoneÃšemailÃšdata_de_cadastro)Ãšqueryr
   Ãšfilterr   Ãšfirstr   r   ÃšHTTP_409_CONFLICTr   r   r   r   r   r   ÃšaddÃšcommitÃš refresh)r   r   Ãšnew_users      r   Ãš
create_userr%      sÃ¹   â‚¬ Ã° 
â€¡xÂxâ€Æ’~Ã— Ã‘ Å“TÅ¸Yâ„¢YÂ¨$Â¯)Â©)Ã‘3Ã“ 4Ã— :Ã‘ :Ã” <ÃœÃœÃ—0Ã‘0Ã˜EÃ´
Ã° 	
Ã° 
â€¡xÂxâ€Æ’~Ã— Ã‘ Å“TÅ¸Zâ„¢ZÂ¨4Â¯:Â©:Ã‘5Ã“ 6Ã— <Ã‘ <Ã” >ÃœÃœÃ—0Ã‘0Ã˜GÃ´
Ã° 	
Ã´
 Ã˜
ÂYâ€°YÃ˜
ÂYâ€°YÃ˜Â{â€°{Ã˜Ã—&Ã‘&Ã˜â€”â€˜Ã˜Âjâ€°jÃ˜Ã—.Ã‘.Ã´â‚¬HÃ°  â€¡FÂFË†8Ã”Ã˜â€¡IÂIâ€KÃ˜â€¡JÂJË†xÃ”Ã˜
â‚¬OÃ³    Nr   r   r   c                  Ã³Ã‚  â€” |j                  t        Â«      }| r2|j                  t        j                  j	                  d| â€º dÂÂ«      Â«      }|r2|j                  t        j
                  j	                  d|â€º dÂÂ«      Â«      }|r2|j                  t        j                  j	                  d|â€º dÂÂ«      Â«      }|j                  Â«       }|st        t        j                  dÂ¬Â«      â€š|S )z~
    Lista todas as empresas, com filtros opcionais:
    - cidade
    - ramo_atuacao
    - busca por nome (texto parcial)
    Ãš%u9   Nenhuma empresa encontrada com os parÃƒÂ¢metros informados.r   )
r   r
   r   r   Ãšiliker   r   Ãšallr   r   ÃšHTTP_404_NOT_FOUND)r   r   r   r   r   Ãš resultss         r   Ãš	get_usersr-   7   sÂ¸   â‚¬ Ã° 
ÂHâ€°Hâ€Tâ€¹Nâ‚¬EÃ¡ 
Ã˜â€”â€˜Å“TÅ¸[â„¢[Ã—.Ã‘.Â°Â°6Â°(Â¸!Â¨}Ã“=Ã“>Ë†Ã™ Ã˜â€”â€˜Å“TÃ—.Ã‘.Ã—4Ã‘4Â°qÂ¸Â¸Ã€aÃ5HÃ“IÃ“JË†Ã™ 
Ã˜â€”â€˜Å“TÅ¸Yâ„¢YÅ¸_â„¢_Â¨qÂ°Â°Â°aÂ¨[Ã“9Ã“:Ë†Ã Âiâ€°iâ€¹kâ‚¬GÃ¡
ÃœÃœÃ—1Ã‘1Ã˜NÃ´
Ã° 	
Ã°
 â‚¬Nr&   z/users/{user_id}Ãš user_idc                 Ã³Ã   â€” |j                  t        Â«      j                  t        j                  | k(  Â«      j	                  Â«       }|st
        t        j                  d| â€º dÂÂ¬Â«      â€š|S )u9   
    Retorna os dados de uma ÃƒÂºnica empresa pelo ID.
    ÃºEmpresa com ID Ãµ    nÃƒÂ£o encontrada.r   )r   r
   r   Ãšidr   r   r   r+   Â©r.   r   r   s      r   Ãšget_user_by_idr4   Y   s[   â‚¬ Ã°
 Â8â€°8â€Dâ€¹>Ã—
 Ã‘
 Â¤Â§Â¡Â¨GÃ‘!3Ã“
4Ã—
:Ã‘
:Ã“
<â‚¬DÃ¡
ÃœÃœÃ—1Ã‘1Ã˜$Â WÂ IÃ->Ã?Ã´
Ã° 	
Ã°
 â‚¬Kr&   Ãš
user_updatec                 Ã³Âº  â€” |j                  t        Â«      j                  t        j                  | k(  Â«      j	                  Â«       }|st
        t        j                  d| â€º dÂÂ¬Â«      â€š|j                  |_        |j                  |_	        |j                  |_
        |j                  |_
        |j                  |_        |j                  Â«        |j                  |Â«       |S )ul   
    Atualiza os dados de uma empresa existente.
    NÃƒÂ£o permite alterar: id, cnpj e data_de_cadastro.
    r0   r1   r   )r   r
   r   r2   r   r   r   r+   r   r   r   r   r   r"   r#   )r.   r5   r   r   s       r   Ãš
update_userr7   j   sÂ²   â‚¬ Ã° Â8â€°8â€Dâ€¹>Ã—
 Ã‘
 Â¤Â§Â¡Â¨GÃ‘!3Ã“
4Ã—
:Ã‘
:Ã“
<â‚¬DÃ¡
ÃœÃœÃ—1Ã‘1Ã˜$Â WÂ IÃ->Ã?Ã´
Ã° 	
Ã° Ã— Ã‘ â‚¬Dâ€IÃ˜Ã—$Ã‘$â‚¬Dâ€KÃ˜#Ã—0Ã‘0â‚¬DÃ”Ã˜Ã—(Ã‘(â‚¬Dâ€MÃ˜Ã—"Ã‘"â‚¬Dâ€JÃ â€¡IÂIâ€KÃ˜â€¡JÂJË†tÃ”Ã 
â‚¬Kr&   c                 Ã³  â€” |j                  t        Â«      j                  t        j                  | k(  Â«      j	                  Â«       }|st
        t        j                  d| â€º dÂÂ¬Â«      â€š|j                  |Â«       |j                  Â«        dd| â€º dÂiS )z/
    Exclui uma empresa existente pelo ID.
    r0   r1   r   Ãš messageu    foi excluÃƒÂ­da com sucesso.)
r   r
   r   r2   r   r   r   r+   Ãšdeleter"   r3   s      r   Ãš
delete_userr;   â€    s   â‚¬ Ã°
 Â8â€°8â€Dâ€¹>Ã—
 Ã‘
 Â¤Â§Â¡Â¨GÃ‘!3Ã“
4Ã—
:Ã‘
:Ã“
<â‚¬DÃ¡
ÃœÃœÃ—1Ã‘1Ã˜$Â WÂ IÃ->Ã?Ã´
Ã° 	
Ã°
  â€¡IÂIË†dâ€OÃ˜â€¡IÂIâ€KÃ ËœÂ¨Â¨	Ã1LÃMÃ
NÃNr&   )Ãš fastapir   r   r   r   r    Ãšschemas.userr   Ãš	config.dbr	   Ãš
model.userr
   Ãštypingr
   Ãšappr   ÃšpostÃšHTTP_201_CREATEDr%   ÃšgetÃšstrr-   Ãšintr4   Ãšputr7   r:   ÃšHTTP_204_NO_CONTENTr;   Â© r&   r   Ãš<module>rJ      s|  Ã°ÃŸ BÃ• BÃ +Ã Ã Ã Ã¡
Æ’iâ‚¬Ã²Ã° â€¡ÂË†(Â Ã— 7Ã‘ 7â‚¬Ã“8Ã™8?Ã€Â»Ã± Ã(Ã° Â¨gÃ² Ã³ 9Ã°Ã°F â€¡ÂË†Ã“Ã¡!Â $â€ºKÃ™"'Â¨Â£+Ã™Â â€º+Ã™Ëœ&â€œ/Ã±	Ã˜ÂSâ€°MÃ°Ã Ëœ3â€˜-Ã°Ã° 
Â3â€°-Ã° Ã° 	Ã²	Ã³ Ã°Ã°B â€¡ÂÃ	Ã“Ã™/6Â°vÂ«Ã± ËœCÃ° Â WÃ² Ã³ Ã°Ã°  â€¡ÂÃ	Ã“Ã™MTÃU[Ã‹_Ã± ËœÃ° Ã+=Ã° Ã€7Ã² Ã³ Ã°Ã°6 â€¡ÂÃÂ¨FÃ—,FÃ‘,Fâ‚¬Ã“GÃ™,3Â°FÂ«OÃ± OËœÃ° OÂ 'Ã² OÃ³ HÃ±Or&   
